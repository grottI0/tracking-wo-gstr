# Детектирование драк и падений


## Вступление

Данный репозиторий включает в себя код, необходимый для развёртывания веб-сервиса, 
основанного на нейросетевой детектирующей модели с последующим отслеживанием объектов на видеозаписи,
с реализованным сбором статистики в базу данных, с использованием фреймворка для передачи обработанных потоковых данных.


## Установка и запуск
Для запуска потребуется python v3.5+, postgreSQL

Склонируйте репозиторий себе на компьютер, перейдите в директорию с ним и выполните установку необходимых модулей
```sh
git clone --recurse-submodules https://github.com/DanilaBelskiy/Website_CV.git
```
Если Вы уже склонировали репозиторий, но забыли использовать --recurse-submodules, введите команду git submodule update --init

Перейдите в директорию с склонированным репозиторием и выполните установку необходимых модулей
```sh
cd Website_CV
pip install --upgrade pip
pip install -r requirements.txt
```

Для создания базы данных запускаем команду
```sh
python3 make_db.py
```
Далее прописываем команды
```sh
CREATE DATABASE yolo_db
exit
```
Помимо создания базы данных после окончания работы программы make_db.py создастся ещё и таблица, в которую вскоре будет добавлена статистика, полученная в результате трекинга.
######
Запускаем приложение командой

```sh
python3 main.py 
```

После этого переходим по адресу http:/localhost:9000/ и наблюдаем результат

## Запуск через docker-compose

Cклонируйте репозиторий себе на компьютер, перейдите в директорию с ним и выполните команду

```sh
git clone --recurse-submodules https://github.com/DanilaBelskiy/Website_CV.git
cd Website_CV
docker-compose up
```

Чтобы остановить сервер, в этой же директории вызываем 
```sh
docker-compose stop
```
Для повторного запуска контейнера необходимо выполнить команду
```sh
docker-compose start
```
## Запуск тестов
Тесты можно запустить командой

```sh
python3 all_test.py
```
